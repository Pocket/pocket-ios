fragment SavedItemParts on SavedItem {
  url
  remoteID: id
  isArchived
  isFavorite
  _deletedAt
  _createdAt
  archivedAt
  tags {
    ...TagParts
  }
  item {
    __typename
    ...ItemParts
    ...PendingItemParts
  }
}

fragment TagParts on Tag {
  __typename
  name
  id
}

query FetchSaves($pagination: PaginationInput, $savedItemsFilter: SavedItemsFilter) {
  user {
    savedItems(pagination: $pagination, filter: $savedItemsFilter) {
      totalCount
      pageInfo {
        hasNextPage
        endCursor
      }
      edges {
        cursor
        node {
          __typename
          ...SavedItemParts
        }
      }
    }
  }
}

mutation SaveItem($input: SavedItemUpsertInput!) {
  upsertSavedItem(input: $input) {
    __typename
    ...SavedItemParts
  }
}

mutation FavoriteItem($itemID: ID!) {
  updateSavedItemFavorite(id: $itemID) {
    id
  }
}

mutation UnfavoriteItem($itemID: ID!) {
  updateSavedItemUnFavorite(id: $itemID) {
    id
  }
}

mutation ArchiveItem($givenUrl: Url!, $timestamp: ISOString!) {
  savedItemArchive(givenUrl: $givenUrl, timestamp: $timestamp) {
    id
  }
}

mutation DeleteItem($itemID: ID!) {
  deleteSavedItem(id: $itemID)
}

mutation DeleteTag($id: ID!) {
  deleteTag(id: $id)
}

mutation TagUpdate($input: TagUpdateInput!) {
  updateTag(input: $input) {
     ...TagParts
  }
}

mutation SavedItemTag($input: SavedItemTagInput!, $timestamp: ISOString!) {
  savedItemTag(input: $input, timestamp: $timestamp) {
    __typename
    ...SavedItemParts
  }
}

mutation UpdateSavedItemRemoveTags($savedItemId: ID!) {
  updateSavedItemRemoveTags(savedItemId: $savedItemId) {
    __typename
    ...SavedItemParts
  }
}

query SavedItemByID($id: ID!) {
  user {
    savedItemById(id: $id) {
      __typename
      ...SavedItemParts
    }
  }
}

query ItemByID($id: ID!) {
  itemByItemId(id: $id) {
    ...ItemParts
  }
}

query Tags($pagination: PaginationInput) {
  user {
    tags(pagination: $pagination) {
      edges {
        node {
          __typename
          ...TagParts
        }
        cursor
      }
      pageInfo {
        endCursor
        hasNextPage
        hasPreviousPage
        startCursor
      }
      totalCount
    }
  }
}

query SearchSavedItems($term: String!, $pagination: PaginationInput, $filter: SearchFilterInput, $sort: SearchSortInput) {
  user {
    searchSavedItems(term: $term, pagination: $pagination, filter: $filter, sort: $sort) {
      edges {
        node {
            savedItem {
                __typename
                ...SavedItemParts
            }
        }
        cursor
      }
      pageInfo {
        endCursor
        hasNextPage
        hasPreviousPage
        startCursor
      }
      totalCount
    }
  }
}
